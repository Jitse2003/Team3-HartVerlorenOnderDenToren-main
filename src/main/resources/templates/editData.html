<!DOCTYPE html SYSTEM "http://thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Aanpassen gegevens</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/stylesheet.css}" href="/static/css/stylesheet.css">
    <script type="text/javascript" th:src="@{/js/bootstrap.bundle.min.js}"
            href="/static/js/bootstrap.bundle.min.js"></script>

</head>
<body>
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-12 mt-5">
            <h1 class="text-center">Love Card</h1>
            <form th:action="@{|/editData/${person.getId()}?language=${#locale.language}|}" method="post"
                  autocomplete="off">

                <h2 th:text="#{confirmLoveCardData}"></h2>

                <div class="form-group mt-3">
                    <label for="name" th:text="#{personname}"></label>
                    <input type="text" class="form-control mt-1" id="name" name="name" th:value="${person.getName()}"
                           th:placeholder="#{personname.placeholder}"
                           required>
                </div>
                <div class="form-group mt-3">
                    <label for="email" th:text="#{email}"></label>
                    <input type="email" class="form-control mt-1" id="email" name="email"
                           th:placeholder="#{email.placeholder}"
                           pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}$" th:value="${person.getEmail()}" required>
                </div>
                <div class="form-group mt-3">
                    <label for="birthdate" th:text="#{geboortedatum}"></label>
                    <input type="date" class="form-control mt-1" id="birthdate" name="birthdate"
                           th:placeholder="#{geboortedatum.placeholder}" th:value="${person.getBirthdate()}" required>
                </div>
                <div class="form-group mt-3">
                    <label for="gender" th:text="#{gender}"></label>
                    <div class="position-relative">
                        <select class="form-control mt-1" id="gender" name="gender" required>
                            <option value="" th:text="#{gender.placeholder}"></option>
                            <div th:if="${#locale.language} == 'en'">
                                <div th:each="gender : ${genders}">
                                    <option th:value="${gender.getId()}" th:text="${gender.getGenderEnglish()}"
                                            th:selected="${person.getGenderTranslation().equals(gender.getGenderEnglish())}"></option>
                                </div>
                            </div>
                            <div th:if="${#locale.language} == 'fr'">
                                <div th:each="gender : ${genders}">
                                    <option th:value="${gender.getId()}" th:text="${gender.getGenderFrench()}"
                                            th:selected="${person.getGenderTranslation().equals(gender.getGenderFrench())}"></option>
                                </div>
                            </div>
                            <div th:if="${#locale.language} == 'nl'">
                                <div th:each="gender : ${genders}">
                                    <option th:value="${gender.getId()}" th:text="${gender.getGender()}"
                                            th:selected="${person.getGenderTranslation().equals(gender.getGender())}"></option>
                                </div>
                            </div>
                        </select>
                        <div class="arrow-down position-absolute top-50 end-0 me-3 translate-middle-y"> &darr;</div>
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label for="crystalBall" th:text="#{kristalbal}"></label>
                    <div class="position-relative">
                        <select class="form-control mt-1" id="crystalBall" name="crystalBall" required>
                            <option value="" th:text="#{kristalbal.placeholder}"></option>
                            <div th:if="${#locale.language} == 'en'">
                                <div th:each="ball : ${crystalBall}">
                                    <option th:value="${ball.getId()}" th:text="${ball.getCrystalBallEnglish()}"
                                            th:selected="${person.getCrystalBallTranslation().equals(ball.getCrystalBallEnglish())}"></option>
                                </div>
                            </div>
                            <div th:if="${#locale.language} == 'fr'">
                                <div th:each="ball : ${crystalBall}">
                                    <option th:value="${ball.getId()}" th:text="${ball.getCrystalBallFrench()}"
                                            th:selected="${person.getCrystalBallTranslation().equals(ball.getCrystalBallFrench())}"></option>
                                </div>
                            </div>
                            <div th:if="${#locale.language} == 'nl'">
                                <div th:each="ball : ${crystalBall}">
                                    <option th:value="${ball.getId()}" th:text="${ball.getCrystalBall()}"
                                            th:selected="${person.getCrystalBallTranslation().equals(ball.getCrystalBall())}"></option>
                                </div>
                            </div>
                        </select>
                        <div class="arrow-down position-absolute top-50 end-0 me-3 translate-middle-y"> &darr;</div>
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label for="perfectDay" th:text="#{perfectedag}"></label>
                    <div class="position-relative">
                        <select class="form-control mt-1" id="perfectDay" name="perfectDay" required>
                            <option value="" th:text="#{perfectedag.placeholder}"></option>
                            <div th:if="${#locale.language} == 'en'">
                            <div th:each="perfectDay : ${perfectDays}">
                                <option th:value="${perfectDay.getId()}" th:text="${perfectDay.getPerfectDayEnglish()}"
                                        th:selected="${person.getPerfectDayTranslation().equals(perfectDay.getPerfectDayEnglish())}"></option>
                            </div>
                            </div>
                            <div th:if="${#locale.language} == 'fr'">
                                <div th:each="perfectDay : ${perfectDays}">
                                    <option th:value="${perfectDay.getId()}" th:text="${perfectDay.getPerfectDayFrench()}"
                                            th:selected="${person.getPerfectDayTranslation().equals(perfectDay.getPerfectDayFrench())}"></option>
                                </div>
                            </div>
                            <div th:if="${#locale.language} == 'nl'">
                                <div th:each="perfectDay : ${perfectDays}">
                                    <option th:value="${perfectDay.getId()}" th:text="${perfectDay.getPerfectDay()}"
                                            th:selected="${person.getPerfectDayTranslation().equals(perfectDay.getPerfectDay())}"></option>
                                </div>
                            </div>
                        </select>
                        <div class="arrow-down position-absolute top-50 end-0 me-3 translate-middle-y"> &darr;</div>
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label for="famous" th:text="#{bekendheid}"></label>
                    <input type="text" class="form-control mt-1" th:placeholder="#{bekendheid.placeholder}" th:value="${person.getFamous()}"
                           id="famous" name="famous" required>
                </div>
                <div class="form-group mt-3 interests">
                    <label th:text="#{selectinterests}"></label>
                    <div class="mx-3 checkBoxForm">
                        <div th:each="interest : ${interests}">
                            <div th:if="${#locale.language} == 'fr'">
                            <input type="checkbox" th:id="${interest.getInterests()}" name="interests" id="interests"
                                   th:value="${interest.getId()}"
                                   th:checked="${convertedInterests.contains(interest.getInterests())}" required>

                                <label class="checkBoxOption" th:for="${interest.getInterests()}"
                                       for="interests"
                                       th:text="${interest.getInterestsFrench()}"></label>
                            </div>
                            <div th:if="${#locale.language} == 'en'">
                                <input type="checkbox" th:id="${interest.getInterests()}" name="interests" id="interests"
                                       th:value="${interest.getId()}"
                                       th:checked="${convertedInterests.contains(interest.getInterests())}" required>

                                <label class="checkBoxOption" th:for="${interest.getInterests()}"
                                       for="interests"
                                       th:text="${interest.getInterestsEnglish()}"></label>
                            </div>
                            <div th:if="${#locale.language} == 'nl'">
                                <input type="checkbox" th:id="${interest.getInterests()}" name="interests" id="interests"
                                       th:value="${interest.getId()}"
                                       th:checked="${convertedInterests.contains(interest.getInterests())}" required>

                                <label class="checkBoxOption" th:for="${interest.getInterests()}"
                                       for="interests"
                                       th:text="${interest.getInterests()}"></label>
                            </div>

                        </div>
                    </div>
                </div>

                <h2 class="mt-3" th:text="#{editPreferences}"></h2>

                <div class="form-group mt-3">
                    <label for="minAge" th:text="#{minimumAge}"></label>
                    <input type="number" class="form-control mt-1" id="minAge" name="minAge"
                           th:value="${person.getMinAgePreference()}" th:placeholder="#{minimumAge.placeholder}"
                           min="18" required>
                </div>
                <div class="form-group mt-3">
                    <label for="maxAge" th:text="#{maximumAge}"></label>
                    <input type="number" class="form-control mt-1" id="maxAge" name="maxAge"
                           th:value="${person.getMaxAgePreference()}" th:placeholder="#{maximumAge.placeholder}"
                           min="18" required>
                </div>
                <div class="form-group mt-3">
                    <label for="genderPreference" th:text="#{confirmGenderPreference}"></label>
                    <div class="position-relative">
                        <select class="form-control mt-1" id="genderPreference" name="genderPreference" required>
                            <option value="" th:text="#{genderpreference}"></option>
                            <div th:if="${#locale.language} == 'en'">
                                <div th:each="gender : ${genders}">
                                    <option th:value="${gender.getId()}" th:text="${gender.getGenderEnglish()}"
                                            th:selected="${person.getGenderPreferenceTranslation().equals(gender.getGenderEnglish())}"></option>
                                </div>
                            </div>
                            <div th:if="${#locale.language} == 'fr'">
                                <div th:each="gender : ${genders}">
                                    <option th:value="${gender.getId()}" th:text="${gender.getGenderFrench()}"
                                            th:selected="${person.getGenderPreferenceTranslation().equals(gender.getGenderFrench())}"></option>
                                </div>
                            </div>
                            <div th:if="${#locale.language} == 'nl'">
                                <div th:each="gender : ${genders}">
                                    <option th:value="${gender.getId()}" th:text="${gender.getGender()}"
                                            th:selected="${person.getGenderPreferenceTranslation().equals(gender.getGender())}"></option>
                                </div>
                            </div>
                        </select>
                        <div class="arrow-down position-absolute top-50 end-0 me-3 translate-middle-y"> &darr;</div>
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label for="houseOnFire" th:text="#{huisinvlam}"></label>
                    <div class="position-relative">
                        <select class="form-control mt-1" id="houseOnFire" name="houseOnFire" required>
                            <option value="" th:text="#{huisinvlam.placeholder}"></option>
                            <div th:if="${#locale.language} == 'en'">
                                <div th:each="houseOnFire : ${houseOnFires}">
                                    <option th:value="${houseOnFire.getId()}" th:text="${houseOnFire.getHouseOnFireEnglish()}"
                                            th:selected="${person.getHouseOnFireTranslation().equals(houseOnFire.getHouseOnFireEnglish())}"></option>
                                </div>
                            </div>
                            <div th:if="${#locale.language} == 'fr'">
                                <div th:each="houseOnFire : ${houseOnFires}">
                                    <option th:value="${houseOnFire.getId()}" th:text="${houseOnFire.getHouseOnFireFrench()}"
                                            th:selected="${person.getHouseOnFireTranslation().equals(houseOnFire.getHouseOnFireFrench())}"></option>
                                </div>
                            </div>
                            <div th:if="${#locale.language} == 'nl'">
                                <div th:each="houseOnFire : ${houseOnFires}">
                                    <option th:value="${houseOnFire.getId()}" th:text="${houseOnFire.getHouseOnFire()}"
                                            th:selected="${person.getHouseOnFireTranslation().equals(houseOnFire.getHouseOnFire())}"></option>
                                </div>
                            </div>
                        </select>
                        <div class="arrow-down position-absolute top-50 end-0 me-3 translate-middle-y"> &darr;</div>
                    </div>
                </div>
                <!--                <div class="form-group mt-3">-->
                <!--                    <label for="hairColorPreference">Haarkleur</label>-->
                <!--                    <div class="position-relative">-->
                <!--                        <select class="form-control mt-1" id="hairColorPreference" name="hairColorPreference" required>-->
                <!--                            <option value="" th:text="#{haarkleur.placeholder}"></option>-->
                <!--                            <div th:each="hairColor : ${houseOnFire}">-->
                <!--                                <option th:value="${hairColor.getId()}"-->
                <!--                                        th:text="${hairColor.getHairColor()}"-->
                <!--                                        th:selected="${person.getHairColorTranslation().equals(hairColor.getHairColor()())}"></option>-->
                <!--                            </div>-->
                <!--                        </select>-->
                <!--                        <div class="arrow-down position-absolute top-50 end-0 me-3 translate-middle-y"> &darr;</div>-->
                <!--                    </div>-->
                <!--                </div>-->
                <div class="form-group mt-3 ">
                    <label th:text="#{confirmInteressesPreference}"></label>
                    <div class="mx-3 checkBoxForm">
                        <div th:each="interestPreference : ${interestsPreferences}">
                            <div th:if="${#locale.language} == 'fr'">
                                <label for="interestsPreference"></label>
                                <input type="checkbox" th:id="${interestPreference.getInterestsPreference()}"
                                       name="interestsPreference" id="interestsPreference"
                                       th:value="${interestPreference.getId()}"
                                       th:checked="${convertedInterestsPreferences.contains(interestPreference.getInterestsPreference())}"
                                       required>
                                <label class="checkBoxOption" th:for="${interestPreference.getInterestsPreference()}"
                                       for="interests"
                                       th:text="${interestPreference.getInterestsPreferenceFrench()}"></label>
                            </div>
                            <div th:if="${#locale.language} == 'en'">
                                <input type="checkbox" th:id="${interestPreference.getInterestsPreference()}"
                                       name="interestsPreference" id="interestsPreference"
                                       th:value="${interestPreference.getId()}"
                                       th:checked="${convertedInterestsPreferences.contains(interestPreference.getInterestsPreference())}"
                                       required>
                                <label class="checkBoxOption" th:for="${interestPreference.getInterestsPreference()}"
                                       for="interests"
                                       th:text="${interestPreference.getInterestsPreferenceEnglish()}"></label>
                            </div>
                            <div th:if="${#locale.language} == 'nl'">
                                <input type="checkbox" th:id="${interestPreference.getInterestsPreference()}"
                                       name="interestsPreference" id="interestsPreference"
                                       th:value="${interestPreference.getId()}"
                                       th:checked="${convertedInterestsPreferences.contains(interestPreference.getInterestsPreference())}"
                                       required>
                                <label class="checkBoxOption" th:for="${interestPreference.getInterestsPreference()}"
                                       for="interests"
                                       th:text="${interestPreference.getInterestsPreference()}"></label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label for="friendshipMeaning" th:text="#{vriendschapbetekenis}"></label>
                    <input type="text" class="form-control mt-1" th:placeholder="#{vriendschapbetekenis.placeholder}" th:value="${person.getFriendshipMeaning()}"
                           id="friendshipMeaning" name="friendshipMeaning" required>
                </div>
                <div class="text-center mt-3">
                    <button type="submit" onclick="validate()" class="btn btn-lg btn-block nextButton"
                            th:text="#{confirmButton}"></button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    function validate() {
        const checkboxes2 = document.querySelectorAll('input[type="checkbox"][name="interestsPreference"]');
        const checkboxes1 = document.querySelectorAll('input[type="checkbox"][name="interests"]');
        checkboxes1.forEach(checkbox => {
            if (checkbox.checked) {
                checkboxes1.forEach(otherCheckbox => {
                    if (otherCheckbox !== checkbox) {
                        otherCheckbox.removeAttribute('required');
                    }
                });
            }
        });
        checkboxes2.forEach(checkbox => {
            if (checkbox.checked) {
                checkboxes2.forEach(otherCheckbox => {
                    if (otherCheckbox !== checkbox) {
                        otherCheckbox.removeAttribute('required');
                    }
                });
            }
        });
    }
</script>

</body>
</html>