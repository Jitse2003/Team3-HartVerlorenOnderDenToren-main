<!DOCTYPE html SYSTEM "http://thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Analytics</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" href="/css/bootstrap.min.css">
    <link rel="stylesheet" th:href="@{/css/stylesheet.css}" href="/css/stylesheet.css">
    <script type="text/javascript" th:src="@{/js/bootstrap.bundle.min.js}"
            href="/static/js/bootstrap.bundle.min.js"></script>

</head>
<body>
<div th:replace="~{fragments/header :: headerfragment}">Header</div>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-6">
            <h3>Matches:</h3>
            <div id="carouselMatches" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Personen met matches</h5>
                                <div th:text="${listPersonWithMatches}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Personen zonder matches</h5>
                                <div th:text="${listPersonWithoutMatches}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Matches laatste uur</h5>
                                <div th:text="${listMatchesPastHour}"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <button class="carousel-control-prev" data-bs-target="#carouselMatches" role="button"
                            data-bs-slide="prev">
                        <span class="nextPrevButtonCarousel carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" data-bs-target="#carouselMatches" role="button"
                            data-bs-slide="next">
                        <span class="nextPrevButtonCarousel carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>

            </div>
            <div id="carouselMatches2" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner mt-3">
                    <div class="carousel-item active" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Afgezegde matches</h5>
                                <div th:text="${listDeniedMatches}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Geaccepteerde matches</h5>
                                <div th:text="${listAcceptedMatches}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Matches in afwachting</h5>
                                <div th:text="${listUnconfirmedMatches}"></div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="text-center">
                    <button class="carousel-control-prev" data-bs-target="#carouselMatches2" role="button"
                            data-bs-slide="prev">
                        <span class="nextPrevButtonCarousel carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" data-bs-target="#carouselMatches2" role="button"
                            data-bs-slide="next">
                        <span class="nextPrevButtonCarousel carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="col-6">
            <h3>Event:</h3>
            <div id="carouselEvent" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Aantal events</h5>
                                <div th:text="${nrOfEvents}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Event met meeste personen</h5>
                                <div th:text="${eventWithMostPersons !=null ? eventWithMostPersons + ': ' + maxPersons : 'er is nog geen event met personen'}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Event met minste personen</h5>
                                <div th:text="${eventWithLeastPersons !=null ? eventWithLeastPersons + ': ' + minPersons : 'er is nog geen event met personen'}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Event met meeste matches</h5>
                                <div th:text="${eventWithMostMatches != null ? eventWithMostMatches + ': ' + maxMatches : 'er is nog geen event met matches'}"></div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item" data-bs-interval="6000">
                        <div class="card">
                            <div class="card-body text-center">
                                <h5 class="card-title">Event met minste matches</h5>
                                <div th:text="${eventWithLeastMatches != null ? eventWithLeastMatches + ': ' + minMatches : 'er is nog geen event met matches'}"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    <button class="carousel-control-prev" data-bs-target="#carouselEvent" role="button"
                            data-bs-slide="prev">
                        <span class="nextPrevButtonCarousel carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" data-bs-target="#carouselEvent" role="button"
                            data-bs-slide="next">
                        <span class="nextPrevButtonCarousel carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-3">
        <h3>Feedback</h3>
        <div th:unless="${showFilters}">
            <a class="nextButton m-2 p-2 fs-6 text-decoration-none" th:href="@{/matchmaker/analytics/filter}">filter</a>
        </div>
        <div th:if="${showFilters}" class="filters">
            <form class="mt-1">
                <a class="nextButton m-2 p-2 fs-6 mb-3 text-decoration-none" th:href="@{/matchmaker/analytics}">Verwijder
                    filters</a>
                <div class="row justify-content-center mt-2">
                    <div class="col-1 w-auto">
                        <label class="mt-3 h5" for="score">Filter op score</label>
                        <select class="form-select" id="score" name="score">
                            <option hidden selected value="" th:selected="${score == null}">Selecteer een score
                            </option>
                            <option th:each="i : ${#numbers.sequence(1, 5)}" th:value="${i}" th:text="${i}"
                                    th:selected="${i == score}"></option>
                        </select>
                    </div>
                    <div class="col-2 w-auto">
                        <label class="mt-3 h5" for="event">Filter op event</label>
                        <select class="form-select" id="event" name="event">
                            <option hidden selected value="">Selecteer een event
                            </option>
                            <div th:each="event : ${events}">
                                <option th:text="${event.getName()}"
                                        th:value="${event.getId()}" th:id="${event.getId()}"
                                        th:selected="${event.getId() == selectedEvent.getId()}">
                                    event name
                                </option>
                            </div>
                        </select>
                    </div>
                    <div class="col-3 w-auto">
                        <label class="mt-3 h5" for="maxFeedbackAmount">Maximum aantal feedback</label>
                        <input class="form-control" type="number" id="maxFeedbackAmount" name="maxFeedbackAmount"
                               th:value="${maxFeedbackAmount}" value="1000" step="1">
                    </div>
                </div>
                <div class="row justify-content-center mt-2">
                    <div class="col text-center">
                        <button type="submit" class="nextButton m-2 p-2 fs-6"> zoek
                        </button>
                    </div>
                </div>
            </form>
            <div class="row justify-content-center mt-3">
                <div class="col-md-6 mt-3" th:each="feedback, f :${feedbackScoreFiltered}"
                     th:unless="${f.index >= maxFeedbackAmount}">
                    <div class="card h-100">
                        <div class="card-body">
                            <h3 class="card-title"
                                th:text="|${feedback.getScore()}/5|">
                                Personen met matches</h3>
                            <h5 class="card-title"
                                th:text="|${feedback.getEvent().getName()} op ${feedback.getEvent().getDate()}|"></h5>
                            <q th:text="|${feedback.getFeedback()}|"></q>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<div class="mb-5">
</div>

</body>
</html>